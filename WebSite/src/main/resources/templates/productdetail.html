<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>상세 페이지</title>
    <style>
        body {
            display: flex;
            justify-content: center; /* 중앙 정렬 */
            margin: 20px;
        }

        /* 컨테이너 */
        .container {
            display: flex;
            flex-wrap: wrap; /* 화면 크기에 따라 요소들이 줄 바꿈될 수 있도록 설정 */
            max-width: 1200px; /* 최대 너비 설정 */
            height:2000px;
            align-items: flex-start; /* 이미지 영역을 위로 정렬 */
        }

        /* 왼쪽 이미지 리스트 영역 */
        .image-list {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow-y: auto; /* 이미지 리스트가 넘칠 경우 스크롤 생성 */
            max-height: calc(100vh - 120px); /* 뷰포트 높이에서 하단 영역을 뺀 만큼의 높이 설정 */
            width: 200px; /* 원하는 왼쪽 이미지 리스트의 너비 설정 */
            align-self: flex-start; /* 오른쪽 영역과 간격을 조절하기 위해 추가 */
            margin-right: -200px; /*왼쪽 큰 이미지와의 여백 간격 조절*/
            margin-top: 50px;
        }

        /* 이미지 스타일링 */
        .image-list img {
            cursor: pointer;
            width: 100%;
            max-width: 100px;
        }

        /* 큰 이미지 영역 */
        .main-image {
            max-width: 100%;
            /* 이미지를 부모 요소의 크기에 맞게 표시 */
            display: block;
            margin: 0 auto;
            /* 이미지를 가운데 정렬 */
            height: auto;
            /* 세로 비율을 유지하면서 이미지 크기 조정 */
            max-height: 100%; /* 이미지 높이를 왼쪽 이미지 리스트와 동일하게 설정 */
        }

        /* 가운데 큰 사진 영역 */
        .description {
            flex: 2;
            margin-top: 50px;
            padding: 30px;
            margin-left: -10px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            /* 오른쪽 영역의 내용을 위로 정렬 */
        }

        /* Details 섹션 스타일링 */
        .details {
            margin-bottom: 20px;
        }

        h2 {
            margin-top: 160px;
        }

        .details h3 {
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            cursor: pointer;
        }

        /* Description 섹션 스타일링 */
        .description h3 {
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            cursor: pointer;
        }

        /* Size + Fit 섹션 스타일링 */
        .size-fit h3 {
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            cursor: pointer;
        }

        .buttons {
            display: flex;
            gap: 10px;
        }

        /* 버튼 공통 스타일 */
        .buttons button {
            padding: 10px 20px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        /* 버튼 호버 효과 */
        .buttons button:hover {
            background-color: #0056b3;
        }

        /* 첫 번째 버튼 스타일 */
        .buttons button:nth-child(1) {
            background-color: #28a745;
        }

        /* 첫 번째 버튼 호버 효과 */
        .buttons button:nth-child(1):hover {
            background-color: #1e7e34;
        }
        /* 큰 이미지 영역 */
        .main-image {
            max-width: 100%;
            /* 이미지를 부모 요소의 크기에 맞게 표시 */
            display: block;
            margin: 0 auto;
            /* 이미지를 가운데 정렬 */
            height: auto;
            /* 세로 비율을 유지하면서 이미지 크기 조정 */
            max-height: 100%; /* 이미지 높이를 왼쪽 이미지 리스트와 동일하게 설정 */
        }
        /* 라디오 버튼 스타일링 */
        label {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            margin-right: 15px;
            padding: 5px;
            border-radius: 50px;
            border: 2px solid #ccc;
            margin-bottom: 20px;
        }

        /* 선택된 라디오 버튼 스타일 */
        label input:checked {
            background-color: #007BFF;
            border-color: #007BFF;
            color: #fff;
        }
        /* 상세 설명 섹션의 기본적으로 숨겨진 상태 */
        #details-section, #description-section, #size-fit-section {
            display: none;
        }

        .footer {
            border: 1px solid red;
            position: absolute; /* 수정: 위치를 고정 */
            text-align: center;
            margin-top: 1000px;
            width: 1200px;
            height: 30%;
            background-color: #f2f2f2; /* 추가: 배경색 설정 */
            padding: 10px; /* 추가: 아래 여백 설정 */
        }

        /* 리뷰와 Q&A 스타일링 */
        ul.minimenu {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
        }

        ul.minimenu li {
            margin-right: 20px;
        }

        ul.minimenu li.selected a {
            border-bottom: 2px solid black; /* 밑줄 굵기와 스타일 지정 */
            padding-bottom: 2px; /* 밑줄과 텍스트 간격 조정 */
        }

        /* 리뷰와 Q&A 제목 스타일링 */
        .board h4 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #333; /* 제목 색상 변경 */
        }

        /* 리뷰와 Q&A 아이템 스타일링 */
        .board .item {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background-color: #fff; /* 아이템 배경색 변경 */
        }

        /* 리뷰와 Q&A 아이템 작성자와 날짜 스타일링 */
        .board .item .meta {
            font-size: 14px;
            color: #777;
        }

        /* 리뷰와 Q&A 아이템 본문 스타일링 */
        .board .item p {
            font-size: 18px;
            margin-top: 10px;
        }

        /* 리뷰와 Q&A 추가 버튼 스타일링 */
        .add-button {
            margin-top: 20px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
        }

        /* 리뷰와 Q&A 입력 폼 스타일링 */
        .form {
            margin-top: 20px;
            text-align: left;
            background-color: #f9f9f9; /* 폼 배경색 변경 */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .form label, .form input, .form textarea {
            display: block;
            margin-bottom: 10px;
            font-size: 16px; /* 폰트 크기 조정 */
            color: #333; /* 폰트 색상 변경 */
        }

        .form input[type="text"], .form textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        /* 제출 버튼 스타일링 */
        .submit-button {
            padding: 10px 20px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        /* 제출 버튼 호버 효과 */
        .submit-button:hover {
            background-color: #0056b3;
        }

        .b1 {
            padding: 5px 10px;
            background-color:#929090;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px; /* 폰트 크기 설정 */
        }

        /* .b1 버튼 호버 효과 */
        .b1:hover {
            background-color: #1A1A1A;
        }

    </style>
</head>
<body>
<div th:replace="header.html"></div>
<div class="container">


    <div class="image-list">
        <img th:src="'/' + ${Product.imglink}" alt="제품 이미지 1" onclick="displayImage('outer1.jpg')">
        <img th:src="'/' + ${Product.imglink1}" alt="제품 이미지 2" onclick="displayImage('outer2.jpg')">
        <img th:src="'/' + ${Product.imglink2}" alt="제품 이미지 3" onclick="displayImage('outer3.jpg')">
        <img th:src="'/' + ${Product.imglink3}" alt="제품 이미지 4" onclick="displayImage('outer4.jpg')">
    </div>

    <!-- 우측 설명 영역 -->
    <div class="description">
        <!-- 큰 이미지 영역 -->
        <img th:src="'/' + ${Product.mainLink}" alt="제품 이미지 1" class="main-image"
             id="mainImage">
    </div>
    <div class="details">
        <!-- 제품 상세 정보 -->
        <h2 th:text="${Product.itemname}"></h2>
        <p th:text="'₩'+ ${Product.price}"></p>
        <!-- Details 섹션 -->
        <h3 onclick="toggleSection('details-section')">Details</h3>
        <div id="details-section">
            <p th:text="${Product.description}"></p>
        </div>
        <!-- Size + Fit 섹션 -->
        <h3 onclick="toggleSection('size-fit-section')">Size + Fit</h3>
        <div id="size-fit-section">
            <p th:text="${Product.sizefit}"></p>
        </div>

        <h3 onclick="toggleSection('description-section')">Description</h3>
        <div id="description-section">
            <p th:text ="${Product.asd}"> </p>
        </div>


        <form action="/cart" method="post">
            <div class="form-group">
                <label for="size">SIZE:</label>
                <select class="form-control" id="size" name="size">
                    <option th:each="sizeOption : ${#strings.arraySplit(Product.size, ',')}" th:value="${sizeOption}" th:text="${sizeOption}"></option>
                </select>
            </div>
            <!-- Buy Now와 Add to Cart 버튼 -->
            <div class="buttons">
                <button>Buy Now</button>
                <button type="submit" th:value="${Product.itemcount}" name="product">cart</button>
            </div>
        </form>
    </div>
</div>
<div class="footer">
    <div class="community">
        <ul class="minimenu">
            <li class="selected"><a href="#prdReview"
                                    onclick="toggleSection('review-section')">REVIEW</a></li>
            <li><a href="#prdQnA" onclick="toggleSection('qna-section')">Q & A</a></li>
        </ul>
        <div class="board">
            <h4>REVIEW</h4>
            <!-- 리뷰 항목 1 -->
            <div class="item">
                <table class="meta">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">제목</th>
                        <th scope="col">글쓴이</th>
                        <th scope="col">작성일</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="dto : ${reviewResult.dtoList}">
                        <th scope="row">
                            [[${dto.rno}]]
                        </th>
                        <td>
                            [[${dto.text}]]
                        </td>
                        <td>
                            <div th:text="${#strings.substring(#authentication.name, 0 , 3) + '********'}"></div>
                        </td>
                        <td>
                            [[${#temporals.format(dto.regDate, 'yyyy/MM/dd HH:mm:ss')}]]
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <button class="b1">후기 쓰기</button>
    <div id="reviewInputArea" style="display: block;">
        <form th:action="@{/addReview}" method="post">
            <input type="text" name="text" placeholder="리뷰 내용 입력">
            <button type="submit">작성 완료</button>
            <button type="button" id="cancelReviewInput">취소</button>
        </form>
    </div>
</div>


<!-- JavaScript를 통한 이미지 표시 및 토글 기능 구현 -->
<script>
    var currentImage = '/outer1.jpg'; // 현재 표시 중인 이미지 파일

    function displayImage(imageUrl) {
        // 현재 이미지를 변경된 이미지로 업데이트
        currentImage = imageUrl;

        // 큰 이미지를 변경된 이미지로 설정
        var mainImage = document.getElementById("mainImage");
        mainImage.src = imageUrl;
    }

    function toggleSection(sectionId) {
        var section = document.getElementById(sectionId);
        if (section.style.display === "none"
            || section.style.display === "") {
            section.style.display = "block";
        } else {
            section.style.display = "none";
        }
    }
</script>
</body>
</html>
